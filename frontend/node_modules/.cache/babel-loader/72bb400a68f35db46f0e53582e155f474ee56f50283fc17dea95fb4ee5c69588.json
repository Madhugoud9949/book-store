{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\madhu goud\\\\Desktop\\\\nxtwave\\\\bookstore\\\\frontend\\\\src\\\\context\\\\ItemContext.js\",\n  _s = $RefreshSig$();\nimport { createContext, useEffect, useState } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst itemContext = /*#__PURE__*/createContext();\n\n// creating custom provider\nfunction CustomItemContext({\n  children\n}) {\n  _s();\n  const [products, setProducts] = useState([]);\n  const [cart, setCart] = useState([]);\n  const [itemsInCart, setItemsInCart] = useState(0);\n  const [totalPrice, setTotalPrice] = useState(0);\n\n  // useEffect to load all the vegetables\n  useEffect(() => {\n    // Fetch products from the backend and dispatch 'SET_PRODUCTS' action\n    const fetchData = async () => {\n      const response = await fetch(\"http://localhost:5000/api/books\");\n      const products = await response.json();\n      console.log(products);\n      setProducts(products);\n    };\n    fetchData();\n  }, []);\n  const addToCart = product => {\n    setTotalPrice(totalPrice + product.price);\n    setCart([...cart, product]);\n    setItemsInCart(itemsInCart + 1);\n  };\n  const removeFromCart = product => {\n    const index = cart.findIndex(prdt => prdt._id === product._id);\n    console.log(index);\n    if (index !== -1) {\n      // Item found in the cart\n      // Now you can remove it from the cart array\n      const updatedCart = [...cart];\n      updatedCart.splice(index, 1);\n      setTotalPrice(totalPrice - cart[index].price);\n      setCart(updatedCart);\n      setItemsInCart(itemsInCart - 1);\n    } else {\n      console.log(\"Item not found in the cart\");\n    }\n  };\n  return (\n    /*#__PURE__*/\n    // default provider\n    _jsxDEV(itemContext.Provider, {\n      value: {\n        products,\n        addToCart,\n        removeFromCart,\n        itemsInCart,\n        totalPrice\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 3\n    }, this)\n  );\n}\n_s(CustomItemContext, \"fzcYcL82kq85tFPM45Zk9fpPWqE=\");\n_c = CustomItemContext;\nexport { itemContext };\nexport default CustomItemContext;\nvar _c;\n$RefreshReg$(_c, \"CustomItemContext\");","map":{"version":3,"names":["createContext","useEffect","useState","jsxDEV","_jsxDEV","itemContext","CustomItemContext","children","_s","products","setProducts","cart","setCart","itemsInCart","setItemsInCart","totalPrice","setTotalPrice","fetchData","response","fetch","json","console","log","addToCart","product","price","removeFromCart","index","findIndex","prdt","_id","updatedCart","splice","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/madhu goud/Desktop/nxtwave/bookstore/frontend/src/context/ItemContext.js"],"sourcesContent":["import { createContext, useEffect, useState } from \"react\";\r\n\r\nconst itemContext = createContext();\r\n\r\n// creating custom provider\r\nfunction CustomItemContext({ children }) {\r\n\tconst [products, setProducts] = useState([]);\r\n\tconst [cart, setCart] = useState([]);\r\n\tconst [itemsInCart, setItemsInCart] = useState(0);\r\n\tconst [totalPrice, setTotalPrice] = useState(0);\r\n\r\n\t// useEffect to load all the vegetables\r\n\tuseEffect(() => {\r\n\t\t// Fetch products from the backend and dispatch 'SET_PRODUCTS' action\r\n\t\tconst fetchData = async () => {\r\n\t\t\tconst response = await fetch(\"http://localhost:5000/api/books\");\r\n\t\t\tconst products = await response.json();\r\n\t\t\tconsole.log(products);\r\n\t\t\tsetProducts(products);\r\n\t\t};\r\n\r\n\t\tfetchData();\r\n\t}, []);\r\n\r\n\tconst addToCart = (product) => {\r\n\t\tsetTotalPrice(totalPrice + product.price);\r\n\t\tsetCart([...cart, product]);\r\n\t\tsetItemsInCart(itemsInCart + 1);\r\n\t};\r\n\r\n\tconst removeFromCart = (product) => {\r\n\t\tconst index = cart.findIndex((prdt) => prdt._id === product._id);\r\n\t\tconsole.log(index);\r\n\r\n\t\tif (index !== -1) {\r\n\t\t\t// Item found in the cart\r\n\t\t\t// Now you can remove it from the cart array\r\n\t\t\tconst updatedCart = [...cart];\r\n\t\t\tupdatedCart.splice(index, 1);\r\n\t\t\tsetTotalPrice(totalPrice - cart[index].price);\r\n\t\t\tsetCart(updatedCart);\r\n\t\t\tsetItemsInCart(itemsInCart - 1);\r\n\t\t} else {\r\n\t\t\tconsole.log(\"Item not found in the cart\");\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t// default provider\r\n\t\t<itemContext.Provider\r\n\t\t\tvalue={{\r\n\t\t\t\tproducts,\r\n\t\t\t\taddToCart,\r\n\t\t\t\tremoveFromCart,\r\n\t\t\t\titemsInCart,\r\n\t\t\t\ttotalPrice,\r\n\t\t\t}}\r\n\t\t>\r\n\t\t\t{children}\r\n\t\t</itemContext.Provider>\r\n\t);\r\n}\r\n\r\nexport { itemContext };\r\nexport default CustomItemContext;\r\n"],"mappings":";;AAAA,SAASA,aAAa,EAAEC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE3D,MAAMC,WAAW,gBAAGL,aAAa,CAAC,CAAC;;AAEnC;AACA,SAASM,iBAAiBA,CAAC;EAAEC;AAAS,CAAC,EAAE;EAAAC,EAAA;EACxC,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGR,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAACS,IAAI,EAAEC,OAAO,CAAC,GAAGV,QAAQ,CAAC,EAAE,CAAC;EACpC,MAAM,CAACW,WAAW,EAAEC,cAAc,CAAC,GAAGZ,QAAQ,CAAC,CAAC,CAAC;EACjD,MAAM,CAACa,UAAU,EAAEC,aAAa,CAAC,GAAGd,QAAQ,CAAC,CAAC,CAAC;;EAE/C;EACAD,SAAS,CAAC,MAAM;IACf;IACA,MAAMgB,SAAS,GAAG,MAAAA,CAAA,KAAY;MAC7B,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,iCAAiC,CAAC;MAC/D,MAAMV,QAAQ,GAAG,MAAMS,QAAQ,CAACE,IAAI,CAAC,CAAC;MACtCC,OAAO,CAACC,GAAG,CAACb,QAAQ,CAAC;MACrBC,WAAW,CAACD,QAAQ,CAAC;IACtB,CAAC;IAEDQ,SAAS,CAAC,CAAC;EACZ,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMM,SAAS,GAAIC,OAAO,IAAK;IAC9BR,aAAa,CAACD,UAAU,GAAGS,OAAO,CAACC,KAAK,CAAC;IACzCb,OAAO,CAAC,CAAC,GAAGD,IAAI,EAAEa,OAAO,CAAC,CAAC;IAC3BV,cAAc,CAACD,WAAW,GAAG,CAAC,CAAC;EAChC,CAAC;EAED,MAAMa,cAAc,GAAIF,OAAO,IAAK;IACnC,MAAMG,KAAK,GAAGhB,IAAI,CAACiB,SAAS,CAAEC,IAAI,IAAKA,IAAI,CAACC,GAAG,KAAKN,OAAO,CAACM,GAAG,CAAC;IAChET,OAAO,CAACC,GAAG,CAACK,KAAK,CAAC;IAElB,IAAIA,KAAK,KAAK,CAAC,CAAC,EAAE;MACjB;MACA;MACA,MAAMI,WAAW,GAAG,CAAC,GAAGpB,IAAI,CAAC;MAC7BoB,WAAW,CAACC,MAAM,CAACL,KAAK,EAAE,CAAC,CAAC;MAC5BX,aAAa,CAACD,UAAU,GAAGJ,IAAI,CAACgB,KAAK,CAAC,CAACF,KAAK,CAAC;MAC7Cb,OAAO,CAACmB,WAAW,CAAC;MACpBjB,cAAc,CAACD,WAAW,GAAG,CAAC,CAAC;IAChC,CAAC,MAAM;MACNQ,OAAO,CAACC,GAAG,CAAC,4BAA4B,CAAC;IAC1C;EACD,CAAC;EAED;IAAA;IACC;IACAlB,OAAA,CAACC,WAAW,CAAC4B,QAAQ;MACpBC,KAAK,EAAE;QACNzB,QAAQ;QACRc,SAAS;QACTG,cAAc;QACdb,WAAW;QACXE;MACD,CAAE;MAAAR,QAAA,EAEDA;IAAQ;MAAA4B,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACY;EAAC;AAEzB;AAAC9B,EAAA,CAxDQF,iBAAiB;AAAAiC,EAAA,GAAjBjC,iBAAiB;AA0D1B,SAASD,WAAW;AACpB,eAAeC,iBAAiB;AAAC,IAAAiC,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}